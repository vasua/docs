<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ably API Documentation - REST API Specification</title>
    <link rel="stylesheet" type="text/css" href="/assets/stylesheet.css" media="screen">
    <link rel="shortcut icon" href="/assets/favicon.ico">

    <script src="/assets/vendor/javascripts/jquery-1-8-3-min.js" type="text/javascript"></script>
    <script src="/assets/vendor/javascripts/jquery-cookie-1-3-1.js" type="text/javascript"></script>

    <link rel="stylesheet" type="text/css" href="/assets/vendor/prettify/prettify.css" media="screen">
    <script src="/assets/vendor/prettify/prettify-lib.js" type="text/javascript"></script>

    <script src="/assets/javascripts/application.js" type="text/javascript"></script>
    <script src="/assets/javascripts/lang-manager.js" type="text/javascript"></script>

    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.4.3">
  </head>
  <body>
    <a href="https://github.com/ably/docs"><img style="position: absolute; top: 0; right: 0; border: 0;" src="/assets/forkme.png" alt="Fork me on GitHub"></a>
  <div id="documentation">
    
    <header>
      
      
        <h1 id="title">REST API Specification</h1>
      
    </header>
    <article>
      <p>The Ably REST API provides a way for a wide range of server and client devices to communicate with the Ably service over <a href="http://en.wikipedia.org/wiki/Representational_State_Transfer">REST</a>. The REST API does not provide a real-time connection to Ably, but in all other respects is a simple subset of the full <a href="/realtime">real-time messaging API</a>.</p>
<p>The primary use-case for the REST API is for servers that are part of the back-end of an application such as a web application, that publish messages, issue access tokens (temporary and client-specific) for its various clients, and obtain message history.</p>
<p>The functional scope of the REST API includes:</p>
<ul>
	<li>authentication: authentication to the service as a client, plus creation of tokens for use by other clients;</li>
	<li>publication of messages;</li>
	<li>retrieval of message history;</li>
	<li>retrieval of presence state and presence;</li>
	<li>retrieval of statistics for application usage.</li>
</ul>
<p>Ably also provides <a href="/rest/client-libaries">REST client libraries for a range of languages</a> including <a href="https://ably.io/download/rest-client-libraries#java">Java</a>, <a href="https://ably.io/download/rest-client-libraries#python">Python</a>, <a href="https://ably.io/download/rest-client-libraries#ruby">Ruby</a>, <a href="https://ably.io/download/rest-client-libraries#dotnet">.NET</a>.</p>
<h2 id="common">Common API behaviour</h2>
<p>The REST API defaults to returning results, and expects request bodies, in JSON format. An Accept header is used to specify an alternative response format, and the following formats are allowed:</p>
<ul>
	<li><code>applicaton/javascript</code>: for JSONP. A <code>callback</code> query parameter is also expected, which defaults simply to &#8220;callback&#8221;;</li>
	<li><code>text/xml</code>: for XML; XML support is planned for the future.</li>
	<li><code>text/html</code>: HTML.</li>
</ul>
<p>It is also possible to specify the response format with the <code>format</code> query parameter (with supported values being <code>json</code>, <code>jsonp</code>, <code>html</code>, <code>xml</code>). Any Accept header takes precedence over a <code>format</code> parameter.</p>
<p>Response data types and layouts are documented in the context of each API or route.</p>
<p>A response statusCode of 200, or 201 in the case of POST, indicates success. A successful result will typically provide a response body but certain operations (such as DELETE) may respond with an empty response body.</p>
<p>All other <a href="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes">standard HTTP statusCodes</a> signify an error. Errors from all APIs are returned as an object of the form:</p>
<pre lang="json"><code lang="json">{
  error: {
    code: &lt;ably error code&gt;,
    reason: &lt;reason string&gt;,
    statusCode: &lt;http status code&gt;
  }
}</code></pre>
<p>The properties of error are:</p>
<dl>
	<dt>code</dt>
	<dd>A specific reason code as defined in the public errors definition (link TBD), where one is known</dd>
	<dt>statusCode</dt>
	<dd>Where a code is not available, the statusCode provides a generic indication of the nature of the failure</dd>
	<dt>reason</dt>
	<dd>The reason string is an English language string that aims to provide useful information to the developer. It is not necessarily intended to be an informative string for the end user</dd>
</dl>
<p>Wherever possible, success response bodies contain links, in <a href="http://en.wikipedia.org/wiki/HATEOAS">HATEOS</a> style, to other resources relevant to the response; where these are present these are included as <code>href</code> attributes on the applicable part of the response object.</p>
<p>GET, PUT, POST and DELETE are available in all contexts where they make sense. GET is always idempotent.</p>
<h2>Authentication</h2>
<p>To understand the REST API it is easiest first to understand the various authentication methods that Ably supports.</p>
<p>Clients can access Ably, whether using REST or the Real-time service, by two methods.</p>
<h4>Basic Authentication</h4>
<p>Using one of the application keys created via the application dashboard. Basic Authentication is the simplest method to use but has two important limitations:</p>
<ul>
	<li>the application key is transmitted over the network as part of a request; therefore it may only be used over TLS (HTTPS or &#8220;SSL&#8221;) connections. This can be a performance disadvantage in some network environments where long round-trip times are amplified by the SSL handshake.</li>
	<li>the client using the API must be in possession of the application key, which potentially exposes the key to compromise. For example, it is not advisable simply to embed the key in a script in a public web page.</li>
</ul>
<h5>Usage in HTTP request header</h5>
<pre>Authorization: Basic &lt;Base64-encoded key&gt;</pre>
<p>where <code>&lt;Base64-encoded key&gt;</code> is the full application key string obtained through the dashboard, encoded with <a href="http://www.ietf.org/rfc/rfc4648.txt">RFC 4648 Base64</a>.</p>
<p>When using a generic HTTP client library that accepts separate username and password arguments for an HTTP request, the application key can be split at the first colon, with the initial segment being used as the username, and the remaining string (without the leading colon) used as the password.</p>
<h4>Token Authentication</h4>
<p>Using a token obtained via the REST API <a href="#requesttoken"><code>requestToken</code></a> endpoint. Tokens are authentication tokens that only have a short lifetime, and therefore they may more readily be distributed to clients where there is a risk of compromise. Tokens may also be issued with a particular scope &#8211; such as a limited set of access rights, or being limited to use by a specific client &#8211; and therefore token-based authentication provides the flexibility to implement access control policies in the application. See <a href="/authentication">Authentication</a> for more details.</p>
<p>The <a href="#requesttoken"><code>requestToken</code></a> endpoint may be used without explicit authentication, relying on the implicit authentication of submitting a validly signed token request.</p>
<h5>Usage in HTTP request header</h5>
<pre>Authorization: Bearer &lt;token string&gt;</pre>
<p>The <code>&lt;token string&gt;</code> does not need to be encoded or escaped. If using a generic HTTP client library it will probably be necessary to add the <code>Authorization</code> header explicitly.</p>
<h1>API routes</h1>
<h2>Application routes</h2>
<p>Routes providing access to the messaging service within an application scope.</p>
<h3 id="stats">Retrieve usage statistics for an application</h3>
<h6>GET /stats</h6>
<p>The Ably system can be queried to obtain usage statistics for a given application, and results are provided aggregated across all channels in use in the application in the specified period. Stats may be used to track usage against account quotas.</p>
<p>Stats queries are made by specifying a query interval and the granularity expected in the results. The query interval is expressed as a start and end time, each being a timestamp in milliseconds since the epoch. Stats are aggregated by the system in &#8216;subminute&#8217; intervals of 6s (ie 0.1m), so query interval start and end times are rounded down to the nearest subminute boundary.</p>
<h5>Parameters</h5>
<dl>
	<dt>start</dt>
	<dd><em>beginning of time</em> The start of the query interval as a time in milliseconds since the epoch.</dd>
	<dt>end</dt>
	<dd><em>now</em> The end of the query interval as a time in milliseconds since the epoch.</dd>
	<dt>limit</dt>
	<dd><em>1000</em> The maximum number of records to return. A limit greater than 10000 is invalid.</dd>
	<dt>direction</dt>
	<dd><em>backwards</em> The direction of this query. The direction determines the order of the returned result array, but also determines which end of the query interval is the start point for the search.</dd>
	<dt>by</dt>
	<dd><em><code>minute</code></em> One of the values <code>minute</code>, <code>hour</code>, <code>day</code> or <code>month</code>, specifying the unit of aggregation in the returned results.</dd>
</dl>
<h5>Options</h5>
<dl>
	<dt>Request body</dt>
	<dd>not applicable</dd>
	<dt>Content-Type</dt>
	<dd>not applicable</dd>
	<dt>Accept</dt>
	<dd><code>application/json</code> by default, or <code>text/html</code>, <code>text/xml</code></dd>
	<dt>Authentication required</dt>
	<dd>yes (<a href="#basic">basic</a> or <a href="#token">token</a>)</dd>
</dl>
<h5>Returns</h5>
<p>In each case a successful result is an array containing the items that match the query (and it may be empty).</p>
<p>Each member is a stats object of the form:</p>
<pre lang="json"><code lang="json">{
    published: {
        messageCount: &lt;&gt;,
        messageSize: &lt;&gt;
    },
    deliveredAll: {
        messageCount: &lt;&gt;,
        messageSize: &lt;&gt;
    },
    deliveredRest: {
        messageCount: &lt;&gt;,
        messageSize: &lt;&gt;
    },
    deliveredRealtime: {
        messageCount: &lt;&gt;,
        messageSize: &lt;&gt;
    },
    deliveredPost: {
        messageCount: &lt;&gt;,
        messageSize: &lt;&gt;
    }
}</code></pre>
<p>where:</p>
<dl>
	<dt>published</dt>
	<dd>messages published (i.e. sent from a client to Ably) by all methods (REST + Real-time)</dd>
	<dt>deliveredRealtime</dt>
	<dd>messages delivered (i.e. sent from Ably to a client) over Real-time connections. Each client that receives a message is counted separately (i.e. one message sent to 2 clients counts as 2)</dd>
	<dt>deliveredRest</dt>
	<dd>messages obtained via the REST history API (i.e. messages retrieved by clients by querying the history, not in real-time). Again each separate client access is counted</dd>
	<dt>deliveredPost</dt>
	<dd>messages delivered (i.e. sent from Ably to a client) over a webhook. Each client that receives a message is counted separately.</dd>
	<dt>deliveredAll</dt>
	<dd>sum of all of the delivered messages listed prior, and is the number that is checked when enforcing account limits.</dd>
</dl>
<p>For each of these, there is separately an indication of:</p>
<dl>
	<dt>messageCount</dt>
	<dd>number of individual messages</dd>
	<dt>messageSize</dt>
	<dd>aggregate size of those messages; Ably calculates <code>messageSize</code> for a given message as the size of the message payload when encoded in bytes plus the byte length of the message event name.</dd>
</dl>
<h2>Channel routes</h2>
<p>Routes providing access to the messaging service within a channel scope.</p>
<h3 id="publish">Publish one or more events on a channel</h3>
<h6>POST /channels/<code>&lt;channel id&gt;</code>/publish</h6>
<p>Publish a message on a channel. Note that since the REST API is stateless, publication using this API is of single messages, outside the context of any specific connection.</p>
<p>The request body contains message details and is an object of the form:</p>
<pre lang="json"><code lang="json">{
  name: &lt;event name&gt;,
  data: &lt;message payload&gt;
}</code></pre>
<p>In JSON format, the accepted types for the <code>data</code> payload are:</p>
<ul>
	<li>boolean</li>
	<li>number</li>
	<li>string</li>
	<li>any JSON-encodable Array or Object.</li>
</ul>
<h5>Parameters</h5>
<p>None</p>
<h5>Options</h5>
<dl>
	<dt>Alternative paths</dt>
	<dd><pre>GET /channels/<code>&lt;channel id&gt;</code>/history</pre></dd>
	<dt>Request body</dt>
	<dd>JSON or formformat, see above.</dd>
	<dt>Content-Type</dt>
	<dd><code>application/json</code> or <code>application/x-www-form-urlencoded</code></dd>
	<dt>Accept</dt>
	<dd>not applicable</dd>
	<dt>Auth required</dt>
	<dd>yes (<a href="#basic">basic</a> or <a href="#token">token</a>)</dd>
</dl>
<h5>Returns</h5>
<p>Nothing</p>
<h3 id="channel-history">Retrieve message history for a channel</h3>
<h6>GET /channels/<code>&lt;channel id&gt;</code>/history</h6>
<h5>Parameters</h5>
<dl>
	<dt>start</dt>
	<dd><em>beginning of time</em> The start of the query interval as a time in milliseconds since the epoch. A message qualifies as a member of the result set if its system timestamp (not necessarily the same as a timestamp applied by the client before submission) is equal to, or greater than, this time.</dd>
	<dt>end</dt>
	<dd><em>now</em> The end of the query interval as a time in milliseconds since the epoch. A message qualifies as a member of the result set if its system timestamp is equal to, or less than, this time.</dd>
	<dt>limit</dt>
	<dd><em>1,000</em> The maximum number of records to return. A limit greater than 10000 is invalid.</dd>
	<dt>direction</dt>
	<dd><em>backwards</em> The direction of this query. The direction determines the order of the returned result array, but also determines which end of the query interval is the start point for the search.</dd>
	<dt>by</dt>
	<dd><em><code>message</code></em> One of the values <code>message</code>, <code>bundle</code> or <code>hour</code>:<br />
If <code>message</code>, the result is an array of individual message records containg the message data together with message metadata.<br />
If <code>bundle</code>, the result is an array of references to message &#8216;bundles&#8217;, which are the unit of persistence of channel messages.<br />
If <code>hour</code>, the result is an array of references to (channel + hour) pairs, signifying those channels and times during which there were messages within the query interval.</dd>
</dl>
<h5>Options</h5>
<dl>
	<dt>Alternative paths</dt>
	<dd><pre>GET /channels/<code>&lt;channel id&gt;</code>/history</pre></dd>
	<dt>Request body</dt>
	<dd>not applicable</dd>
	<dt>Content-Type</dt>
	<dd>not applicable</dd>
	<dt>Accept</dt>
	<dd><code>application/json</code> by default, or <code>text/html</code>, <code>text/xml</code></dd>
	<dt>Auth required</dt>
	<dd>yes (<a href="#basic">basic</a> or <a href="#token">token</a>)</dd>
</dl>
<h5>Returns</h5>
<p>In each case a successful result is an array containing the items that match the query (and it may be empty).</p>
<p>In the case of a <code>message</code> query, each member is a <code>message</code> object of the form:</p>
<pre lang="json"><code lang="json">{
  name: &lt;event name&gt;,
  channel: &lt;channel id&gt;,
  data: &lt;message payload&gt;,
  timestamp: &lt;message timestamp&gt;
}</code></pre>
<p>In the case of a <code>bundle</code> query, each member is a <code>bundle</code> reference. (Detailed description TBD.)</p>
<p>In the case of an <code>hour</code> query, each member is a <code>channel/hour</code> reference. (Detailed description TBD.)</p>
<h3 id="presence">Retrieve instantaneous presence status for a channel</h3>
<h6>GET /channels/<code>&lt;channel id&gt;</code>/presence</h6>
<p>Detailed description TBD.</p>
<h5>Parameters</h5>
<p>TBD</p>
<h5>Options</h5>
<dl>
	<dt>Alternative paths</dt>
	<dd><pre>GET /channels/<code>&lt;channel id&gt;</code>/presence</pre></dd>
	<dt>Request body</dt>
	<dd>not applicable</dd>
	<dt>Content-Type</dt>
	<dd>not applicable</dd>
	<dt>Accept</dt>
	<dd><code>application/json</code> by default, or <code>text/html</code>, <code>text/xml</code></dd>
	<dt>Auth required</dt>
	<dd>yes (<a href="#basic">basic</a> or <a href="#token">token</a>)</dd>
</dl>
<h5>Returns</h5>
<p>TBD</p>
<h3 id="presence-history">Retrieve presence history for a channel</h3>
<h6>GET /channels/<code>&lt;channel id&gt;</code>/presence/history</h6>
<p>Detailed description TBD.</p>
<h5>Parameters</h5>
<p>TBD</p>
<h5>Options</h5>
<dl>
	<dt>Alternative paths</dt>
	<dd><pre>GET /channels/<code>&lt;channel id&gt;</code>/presence/history</pre></dd>
	<dt>Request body</dt>
	<dd>not applicable</dd>
	<dt>Content-Type</dt>
	<dd>not applicable</dd>
	<dt>Accept</dt>
	<dd><code>application/json</code> by default, or <code>text/html</code>, <code>text/xml</code></dd>
	<dt>Auth required</dt>
	<dd>yes (<a href="#basic">basic</a> or <a href="#token">token</a>)</dd>
</dl>
<h5>Returns</h5>
<p>TBD</p>
<h2>Authentication</h2>
<h3 id="requesttoken">Request an access token</h3>
<h6>POST /keys/<code>key id</code>/requestToken</h6>
<p>This is the means by which clients obtain access tokens to use the service. The construction of a token request is described in the <a href="/authentication">Authentication</a> page. The resulting <code>token response</code> object contains the token properties as defined in <a href="/authentication">Authentication</a>.</p>
<h5>Parameters</h5>
<p>None</p>
<h5>Options</h5>
<dl>
	<dt>Request body</dt>
	<dd>signed or unsigned token request</dd>
	<dt>Content-Type</dt>
	<dd><code>text/plain</code></dd>
	<dt>Accept</dt>
	<dd><code>application/json</code></dd>
	<dt>Auth required</dt>
	<dd>no (for signed token requests), yes (basic or token for unsigned token requests)</dd>
</dl>
<h5>Returns</h5>
<p><code>&lt;token response&gt;</code></p>
<h2>Utilities</h2>
<h3 id="time">Get the service time</h3>
<h6>GET /time</h6>
<p>This returns the service time in milliseconds since the epoch. This may be used by clients that do not have local access to a sufficiently accurate time source when generating a token request. (Token requests include a timestamp and have a limited validity period to help defend against replay attacks.)</p>
<p>The result is a JSON-encoded array of length 1 containing the time result as a number.</p>
<h5>Parameters</h5>
<p>None</p>
<h5>Options</h5>
<dl>
	<dt>Request body</dt>
	<dd>not applicable</dd>
	<dt>Content-Type</dt>
	<dd>not applicable</dd>
	<dt>Accept</dt>
	<dd><code>application/json</code></dd>
	<dt>Auth required</dt>
	<dd>no</dd>
</dl>
<h5>Returns</h5>
<pre lang="json"><code lang="json">[ &lt;time&gt; ]</code></pre>
    </article>
    <hr class="back">
    <a href="#documentation">Back to top</a>
  </div>
  <div id="sidebar">
  <a href="/" title="API Documentation Home"><img src="/assets/ably-logo.png" class="ably-logo" title="API Documentation Home"></a>
  <ul>
<li class=''><a href='/root/quick-start-guide/'>Quickstart Guide</a></li>
<li class=''><a href='/root/how-ably-works/'>How Ably works</a></li>
<li class=''><a href='/root/usage-limits-billing/'>Usage Limits &amp; Billing</a></li>
</ul>
  <h2><a href="/realtime/">Real-time client lib</a></h2>
<ul>
<li class=''><a href='/realtime/usage/'>Using the Realtime library</a></li>
<li class=''><a href='/realtime/connection/'>Connection</a></li>
<li class=''><a href='/realtime/channels-messages/'>Channels and Messages</a></li>
<li class=''><a href='/realtime/presence/'>Presence</a></li>
<li class=''><a href='/realtime/authentication/'>Authentication</a></li>
<li class=''><a href='/realtime/history/'>History</a></li>
<li class=''><a href='/realtime/statistics/'>Statistics</a></li>
</ul>
  <h2><a href="/rest/">REST client lib</a></h2>
<ul>
<li class=''><a href='/rest/usage/'>Usage</a></li>
<li class=''><a href='/rest/channels-messages/'>Channels &amp; Messages</a></li>
<li class=''><a href='/rest/presence/'>Presence</a></li>
<li class=''><a href='/rest/authentication/'>Authentication</a></li>
<li class=''><a href='/rest/history/'>History</a></li>
<li class=''><a href='/rest/statistics/'>Statistics</a></li>
<li class=''><a href='/rest/encryption/'>Encryption</a></li>
</ul>
  <h2 class="selected"><a href="/rest-api/">REST API</a></h2>
<ul>
</ul>
  <h2><a href="/client-lib-development-guide/">Library Development</a></h2>
<ul>
<li class=''><a href='/client-lib-development-guide/comet/'>Comet Transport</a></li>
<li class=''><a href='/client-lib-development-guide/connection-manager/'>Connection Manager</a></li>
<li class=''><a href='/client-lib-development-guide/protocol/'>Realtime Protocol Definition</a></li>
<li class=''><a href='/client-lib-development-guide/recovery/'>Connection Recovery</a></li>
<li class=''><a href='/client-lib-development-guide/websocket/'>WebSocket Transport</a></li>
<li class=''><a href='/other/client-lib-developer/'>Notes (To be deleted)</a></li>
</ul>
  <h2>Other</h2>
<ul>
<li class=''><a href='/other/authentication/'>Authentication</a></li>
<li class=''><a href='/other/webhooks/'>Receiving Webhooks</a></li>
</ul>
  <ul>
<li class=''><a href='/other/documentation-formatting-guide/'>Documentation Formatting Guide</a></li>
<li><a href="https://ably.io">Visit Ably.io</a></li>
</ul>
</div>
</body>
</html>
