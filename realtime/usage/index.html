<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ably API Documentation - Using the Realtime library</title>
    <link rel="shortcut icon" href="/assets/favicon.ico">

    <link rel="stylesheet" type="text/css" href="/assets/vendor/prettify/prettify.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/assets/stylesheet.css" media="screen">

    <script src="/assets/vendor/javascripts/jquery-1-8-3-min.js" type="text/javascript"></script>
    <script src="/assets/vendor/javascripts/jquery-cookie-1-3-1.js" type="text/javascript"></script>
    <script src="/assets/vendor/javascripts/base64.js" type="text/javascript"></script>

    <script src="/assets/vendor/prettify/prettify-lib.js" type="text/javascript"></script>

    <script src="//cdn.ably.io/lib/ably.min.js" type="text/javascript"></script>

    <script src="/assets/javascripts/application.js" type="text/javascript"></script>
    <script src="/assets/javascripts/lang-manager.js" type="text/javascript"></script>

    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.7.5">
  </head>
  <body>
    <div class="canonical-notice">
      <img src="/assets/icon-alert.png">
      <span class="canonical-notice-text">
        You are viewing our bleeding edge unstable documentation. We recommend you use of our <a href="https://www.ably.io/documentation">stable documentation »</a>
      </span>
      <img src="/assets/icon-alert.png">
    </div>
    <div class="fork-banner"><a href="https://github.com/ably/docs"><img src="/assets/forkme.png" alt="Fork me on GitHub"></a></div>

  <div id="documentation">
    
      <nav class="jump-to-nav">
        <div class="form">
          <select id="jump-to-nav">
            <option>Jump to ...</option>
            <optgroup label='Help with'>
<option id="anchor-title">Usage</option>
</optgroup>
<optgroup label='Realtime API reference'>
<option id="anchor-constructor">constructor</option>
</optgroup>
<optgroup label='Attributes'>
<option id="anchor-auth">auth</option>
<option id="anchor-channels">channels</option>
<option id="anchor-client-id">client_id</option>
<option id="anchor-connection">connection</option>
<option id="anchor-rest-client">rest_client</option>
</optgroup>
<optgroup label='Methods'>
<option id="anchor-connect">connect</option>
<option id="anchor-close">close</option>
<option id="anchor-stats">stats</option>
<option id="anchor-time">time</option>
</optgroup>
<optgroup label='Related types'>
<option id="anchor-client-options">ClientOptions</option>
</optgroup>
          </select>
        </div>
      </nav>
    
    <header>
      
        <div class="breadcrumb"><a href="/realtime/">Realtime Client Library API</a><span class="separator">/</span></div>
      
      
        <h1 id="title">Using the Realtime library</h1>
      
    </header>
    <article>
      <p>The Realtime library when initialized attempts to establish and maintain a single connection to the Ably realtime service. The library extends the <a href="/rest/usage">REST library</a> to provide all REST API functionality including the <a href="/rest/authentication">authentication API</a>.   Whereas the REST API is stateless, the Realtime API maintains connection and channel state.</p>
<p>The Ably Realtime client library is available for <a href="https://www.ably.io/download/realtime-client-libraries">most popular languages and platforms</a> with a consistent API across all platforms. You can view this documentation with your preferred language API and code examples using the language selector navigation above.</p>


<div lang="javascript"> <!-- start javascript language block -->
<p>The Realtime library for browser Javascript environments should be loaded from the Ably CDN as follows:</p>
<pre lang="javascript"><code lang="javascript">&lt;script lang="text/javascript" src="//cdn.ably.io/lib/ably.min.js" /&gt;</code></pre>
<p>The script contains both the Realtime and REST libraries as well as all their dependencies. To instance the Realtime library:</p>
<pre lang="javascript"><code lang="javascript">var realtime = new Ably.Realtime({ key: apiKey });</code></pre>

</div> <!-- /end javascript language block -->



<div lang="nodejs"> <!-- start nodejs language block -->
<p>The Realtime library for nodejs targets clients and servers and is obtainable as a module <a href="https://npmjs.org/package/ably">directly from npm</a>. Install with:</p>
<pre lang="sh"><code lang="sh">npm install ably-js</code></pre>
<p>The Ably Node.js module contains both the REST and Realtime libraries; each is exported separately by the module. To instance the Realtime library:</p>
<pre lang="nodejs"><code lang="nodejs">var Ably = require('ably-js');
var realtime = new Ably.Realtime({ key: apiKey });</code></pre>

</div> <!-- /end nodejs language block -->



<div lang="ruby"> <!-- start ruby language block -->
<p>The Realtime library for Ruby is obtainable as a RubyGem direcly using:</p>
<pre lang="sh"><code lang="sh">gem install ably</code></pre>
<p>If using bundler, simply add the following to your Gemfile and run <code>bundle install</code>:</p>
<pre lang="ruby"><code lang="ruby">gem 'ably'</code></pre>
<p>The Ably Ruby gem contians both the REST and Realtime libraries; each is namespaced separately by the gem. To instance the Realtime library:</p>
<pre lang="ruby"><code lang="ruby">ably = Ably::Realtime.new(key: api_key)</code></pre>

</div> <!-- /end ruby language block -->



<div lang="java"> <!-- start java language block -->
<p>The Realtime library for Java is downloadable as a JAR from <a href="https://github.com/ably/ably-java/releases">https://github.com/ably/ably-java/releases</a>.</p>
<p>Ensure this JAR is included in your classpath.</p>
<pre lang="java"><code lang="java">import io.ably.types;
import io.ably.realtime;
ClientOptions options = new ClientOptions(apiKey);
AblyRealtime realtime = new AblyRealtime(options);</code></pre>

</div> <!-- /end java language block -->

<p>The required and supported <a href="#client-options">client options</a> are described below.</p>
<h1>Realtime API Reference</h1>
<h2 id="constructor">Constructor</h2>
<p>The Ably Realtime library constructor is overloaded allowing it to be instanced using either a string API key or Token ID, or <a href="#client-options"><code>ClientOptions</code></a></p>
<blockquote class="definition">
<p class="definition"><span lang='default'>Ably.Realtime(keyOrTokenIdString)</span><span lang='ruby'>Ably::Realtime.new(key_or_token_id_string)</span><span lang='java'>io.ably.AblyRealtime(String keyOrTokenIdString)</span></p>
</blockquote>
<p>This will instance the Realtime library with the provided API key or Token ID string.</p>
<blockquote class="definition">
<p class="definition"><span lang='default'>Ably.Realtime(clientOptions)</span><span lang='ruby'>Ably::Realtime.new(client_options)</span><span lang='java'>io.ably.AblyRealtime(ClientOptions clientOptions)</span></p>
</blockquote>


<div lang="default"> <!-- start default language block -->
<p>This will instance the library using the specified <a href="#client-options">ClientOptions</a>.</p>

</div> <!-- /end default language block -->



<div lang="ruby"> <!-- start ruby language block -->
<p>This will instance the library and create a new <code>Ably::Realtime::Client</code> using the specified <a href="#client-options"><code>ClientOptions</code></a>.</p>

</div> <!-- /end ruby language block -->

<p>The Realtime constructor is used to instance the library. The Realtime library may be instanced multiple times with the same or different <a href="#client-options"><code>ClientOptions</code></a> in any given context. Except where specified otherwise, instances operate independently of one another.</p>
<h3 id="authentication">Authentication</h3>
<p>The Realtime library needs to have credentials to be able to authenticate with the Ably service:</p>
<p>The <code>key</code> option takes a key string, as obtained from the <a href="http://support.ably.io/solution/articles/3000030053-how-do-i-access-my-app-dashboard">application dashboard</a>. Use this option if you wish to use Basic authentication, or if you want to be able to request tokens without needing to defer to a separate entity to sign token requests. Note that initialising the library with a <code>key</code> does not necessarily mean that the library will use Basic auth; but knowing the key it is able to create and sign token requests and use token authentication when necessary.</p>
<p>The <code>token</code> option takes a token string, and assumes the token has been obtained from some other instance that requested the token. Use the token option if you are provided with a token to use and you do not have a key (or do not have a key with the capabilities that you require).</p>
<p>Since tokens are short-lived, it is rarely sufficient to start with a token without the means for refreshing it. The <span lang="default"><code>authUrl</code> and <code>authCallback</code> options</span><span lang="ruby"><code>:auth_url</code> and <code>:auth_callback</code> options</span> are provided to allow a user of the library to provide new tokens or token requests to the library as required; using these options allows the library to be instanced without a <code>key</code> or <code>token</code>, and an initial token will be obtained automatically when required.</p>
<p>See <a href="#client-options"><code>ClientOptions</code></a> for the full set of initialisation options.</p>
<h2 id="members"><span lang='default'>AblyRealtime Attributes</span><span lang='java'>io.ably.AblyRealtime Members</span><span lang='javascript,nodejs'>AblyRealtime Properties</span></h2>
<p>The Realtime object exposes the following public <span lang="default">attributes</span><span lang="java">members</span><span lang="javascript,nodejs">properties</span>.</p>


<div lang="ruby"> <!-- start ruby language block -->
<h6 id="auth">auth</h6>
<p>A reference to the <a href="/realtime/authentication"><code>Auth</code></a> authentication object configured for this client library.</p>

</div> <!-- /end ruby language block -->

<h6 id="channels">channels</h6>
<p>A reference to the <a href="/realtime/channels-messages"><code>Channel</code> collection</a> instance for this library indexed by the channel name. See <a href="/realtime/channels-messages/">channels and messages</a> for more information.</p>


<div lang="ruby"> <!-- start ruby language block -->
<h6 id="client-id"><span lang='default'>clientId</span><span lang='ruby'>client_id</span></h6>
<p>The client ID string, if any, configured for this client connection. See <a href="/realtime/authentication">authentication</a> for more information on authentication and using a client ID.</p>

</div> <!-- /end ruby language block -->

<h6 id="connection">connection</h6>
<p>A reference to the <a href="/realtime/connection"><code>Connection</code></a> object for this library instance.</p>


<div lang="ruby"> <!-- start ruby language block -->
<h6 id="rest-client">rest_client</h6>
<p>A reference to the <a href="/rest/usage">REST Client</a> configured with the same <a href="#client-options"><code>ClientOptions</code></a>.  The Realtime library is a superset of the REST library, however accessing methods in the REST library, unlike the Realtime library, are blocking operations.</p>

</div> <!-- /end ruby language block -->

<h2 id="methods"><span lang='default'>AblyRealtime Methods</span><span lang='ruby'>Realtime::Client Methods</span><span lang='java'>io.ably.AblyRealtime Methods</span></h2>
<h6 id="close">close</h6>
<blockquote class="definition">
<p class="definition"><span lang='default'>close()</span><span lang='ruby'>close(&amp;block)</span><span lang='java'>public void close()</span></p>
</blockquote>
<p>This simply calls <span lang="default"><a href="/realtime/connection#close"><code>connection.close()</code></a></span><span lang="ruby"><a href="/realtime/connection#close"><code>connection.close</code></a></span> and causes the connection to close, entering the <code>closing</code> state. Once closed, the library will not attempt to re-establish the connection without an explicit call to <span lang="default"><a href="/realtime/connection#connect"><code>connect()</code></a></span><span lang="ruby"><a href="/realtime/connection#connect"><code>connect</code></a></span>.</p>
<h6 id="connect">connect</h6>
<blockquote class="definition">
<p class="definition"><span lang='default'>connect()</span><span lang='ruby'>connect(&amp;block)</span><span lang='java'>public void connect()</span></p>
</blockquote>
<p>Explicitly calling <code>connect</code> is unnecessary unless the <a href="#client-option"><code>ClientOption</code></a> <span lang="default"><code>connectAutomatically</code></span><span lang="ruby"><code>connect_automatically</code></span> is disabled. This method simply calls <span lang="default"><a href="/realtime/connection#connect"><code>connection.connect()</code></a></span><span lang="ruby"><a href="/realtime/connection#connect"><code>connection.connect</code></a></span> and causes the connection to open, entering the <code>connecting</code> state.</p>
<h6 id="stats">stats</h6>
<blockquote class="definition">
<p class="definition"><span lang='default'>stats(params, callback(<a href="/realtime/types#error-info">ErrorInfo</a> err, <a href="/realtime/types#paginated-result">PaginatedResult</a>&lt;<a href="/realtime/types#stats">Stats</a>&gt; result))</span><span lang='ruby'>stats(Hash options) &#8594; <a href="/realtime/types#deferrable">EventMachine::Deferrable</a> &#8594; yields <a href="/realtime/types#paginated-result">PaginatedResult</a>&lt;<a href="/realtime/types#stats">Stats</a>&gt;</span><span lang='java'>public <a href="/realtime/types#paginated-result">PaginatedResult</a>&lt;<a href="/realtime/types#stats">Stats</a>&gt; stats(Param[] params)</span></p>
</blockquote>
<p>This call queries the <a href="/rest-api#stats">REST <code>/stats</code> API</a> and retrieves application statistics. A <a href="/realtime/types#paginated-result">PaginatedResult</a> is returned, containing an array of <a href="/realtime/types#stats">Stats</a> for the current page of results.</p>
<h4>Parameters</h4>
<dl>
	<dt><div lang="default">params</div></dt>
	<dd>an optional object containing the query parameters</dd>
	<dt><div lang="ruby">options</div></dt>
	<dd>an optional options Hash containing the query parameters</dd>
	<dt><div lang="java">params</div></dt>
	<dd>an optional array <code>Param</code> key value pairs containing the query parameters</dd>
</dl>
<dl>
	<dt><div lang="nodejs,javascript">callback</div></dt>
	<dd>is a function of the form: <code>callback(err, results)</code></dd>
	<dt><div lang="ruby">&amp;block</div></dt>
	<dd>yields a <code>PaginatedResult&lt;Stats&gt;</code> array</dd>
</dl>
<h4><span lang='default'>Query params</span><span lang='ruby'>Query options</span></h4>
<p>Match the <span lang="default">params</span><span lang="ruby">options</span> used in the <a href="/rest-api#stats">REST <code>/stats</code> API</a> endpoint</p>
<dl>
	<dt><span lang="ruby">:</span>start</dt>
	<dd>earliest <span lang="ruby"><code>Time</code> or </span>millisecond since epoch time for any stats retrieved<br><i>Type: Long<span lang="ruby">, Time</span></i></dd>
	<dt><span lang="ruby">:</span>end</dt>
	<dd>latest <span lang="ruby"><code>Time</code> or </span>millisecond since epoch time for any stats retrieved<br><i>Type: Long<span lang="ruby">, Time</span></i></dd>
	<dt><span lang="ruby">:</span>direction</dt>
	<dd><span lang="ruby">:</span><code>forwards</code> or <span lang="ruby">:</span><code>backwards</code>, defaults to <span lang="ruby">:</span><code>backwards</code><br><i>Type: <span lang="default">String</span><span lang="ruby">Symbol</span></i></dd>
	<dt><span lang="ruby">:</span>limit</dt>
	<dd>maximum number of messages to retrieve up to 1,000, defaults to 100<br><i>Type: Integer</i></dd>
	<dt><span lang="ruby">:</span>unit</dt>
	<dd><span lang="ruby">:</span><code>minute</code>, <span lang="ruby">:</span><code>hour</code>, <span lang="ruby">:</span><code>day</code> or <span lang="ruby">:</span><code>month</code>. Defaults to <span lang="ruby">:</span><code>minute</code><br><i>Type: <span lang="default">String</span><span lang="ruby">Symbol</span></i></dd>
</dl>


<div lang="nodejs,javascript"> <!-- start nodejs,javascript language block -->
<h4>Callback result</h4>
<p>On success, <code>result</code> contains a <a href="#paginated-result"><code>PaginatedResult</code></a> encapsulating a collection of <code>Stats</code> objects corresponding to the current page of <a href="/realtime/types#stats"><code>Stats</code></a>&quot; results. <a href="#paginated-result"><code>PaginatedResult</code></a> supports pagination using <code>next</code> and <code>first</code> methods.</p>
<p>On failure to retrieve stats, <code>err</code> contains an <a href="#error-info"><code>ErrorInfo</code></a> object with an error response as defined in the <a href="/rest-api#common">REST API</a> documentation.</p>

</div> <!-- /end nodejs,javascript language block -->



<div lang="java"> <!-- start java language block -->
<h4>Returns</h4>
<p>On success, the returned <a href="#paginated-result"><code>PaginatedResult</code></a> encapsulates a collection of <code>Stats</code> objects corresponding to the current page of results. <a href="#paginated-result"><code>PaginatedResult</code></a> supports pagination using <code>next</code> and <code>first</code> methods.</p>
<p>Failure to retrieve the stats will raise an <a href="#ably-exception"><code>AblyException</code></a></p>

</div> <!-- /end java language block -->



<div lang="ruby"> <!-- start ruby language block -->
<h4>Returns</h4>
<p>A <a href="/realtime/types#deferrable"><code>Deferrable</code></a> object is returned from the stats method.</p>
<p>On success, the registered success callbacks for the <a href="/realtime/types#deferrable"><code>Deferrable</code></a> and any block provided to the method yields a <a href="#paginated-result">PaginatedResult</a> that encapsulates a collection of <code>Stat</code> objects corresponding to the current page of results. <a href="#paginated-result"><code>PaginatedResult</code></a> supports pagination using <code>next</code> and <code>first</code> methods.</p>
<p>Failure to retrieve the stats will trigger the errback callbacks of the <a href="/realtime/types#deferrable"><code>Deferrable</code></a> with an <a href="#error-info"><code>ErrorInfo</code></a> object containing an error response as defined in the <a href="/rest-api#common">REST API</a> documentation.</p>

</div> <!-- /end ruby language block -->

<h6 id="time">time</h6>
<blockquote class="definition">
<p class="definition"><span lang='default'>time(callback(<a href="/realtime/types#error-info">ErrorInfo</a> err, Number time))</span><span lang='ruby'>time → <a href="/realtime/types#deferrable">EventMachine::Deferrable</a> → yields Time</span><span lang='java'>public long time</span></p>
</blockquote>
<p>Obtains the time from the Ably service.  This may be required on clients that do not have access to a sufficiently well maintained time source, to provide timestamps for use in token requests.</p>


<div lang="nodejs,javascript"> <!-- start nodejs,javascript language block -->
<h4>Callback result</h4>
<p>On success, <code>time</code> is millisecond since epoch.</p>
<p>On failure to retrieve the Ably server time, <code>err</code> contains an <a href="#error-info"><code>ErrorInfo</code></a> object with an error response as defined in the <a href="/rest-api#common">REST API</a> documentation.</p>

</div> <!-- /end nodejs,javascript language block -->



<div lang="java"> <!-- start java language block -->
<h4>Returns</h4>
<p>On success, millisecond since epoch is returned.</p>
<p>Failure to retrieve the Ably server time will raise an <a href="#ably-exception"><code>AblyException</code></a>.</p>

</div> <!-- /end java language block -->



<div lang="ruby"> <!-- start ruby language block -->
<h4>Returns</h4>
<p>A <a href="/realtime/types#deferrable"><code>Deferrable</code></a> object is returned from this method.</p>
<p>On success, the registered success callbacks for the <a href="/realtime/types#deferrable"><code>Deferrable</code></a> and any block provided to the method yields a <code>Time</code> object.</p>
<p>Failure to retrieve the Ably server time will trigger the errback callbacks of the <a href="/realtime/types#deferrable"><code>Deferrable</code></a> with an <a href="#error-info"><code>ErrorInfo</code></a> object containing an error response as defined in the <a href="/rest-api#common">REST API</a> documentation.</p>

</div> <!-- /end ruby language block -->

<h2 id="client-options"><span lang='default'>ClientOptions</span><span lang='java'>io.ably.types.ClientOptions</span></h2>


<div lang="nodejs,javascript"> <!-- start nodejs,javascript language block -->
<p><code>ClientOptions</code> is a plain Javascript object and is used in the the <code>Ably.Realtime</code> constructor&#8217;s <code>options</code> argument.  The following attributes can be defined on the object:</p>

</div> <!-- /end nodejs,javascript language block -->



<div lang="ruby"> <!-- start ruby language block -->
<p><code>ClientOptions</code> is a Hash object and is used in the the <code>Ably::Realtime</code> constructor&#8217;s <code>options</code> argument.  The following key symbol values can be added to the Hash:</p>

</div> <!-- /end ruby language block -->



<div lang="java"> <!-- start java language block -->
<p><code>ClientOptions</code> is used in the the <code>AblyRealtime</code> constructor&#8217;s <code>options</code> argument</p>

</div> <!-- /end java language block -->

<dl>
	<dt><span lang="default"><code>key</code></span><span lang="ruby"><code>:key</code></span></dt>
	<dd>The full key string, as obtained from the <a href="http://support.ably.io/solution/articles/3000030053-how-do-i-access-my-app-dashboard">application dashboard</a>. Use this option if you wish to use Basic authentication, or wish to be able to issue tokens without needing to defer to a separate entity to sign token requests. Read more about <a href="/realtime/authentication">Basic authentication</a><br><i>Type: String</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>token</code></span><span lang="ruby"><code>:token</code></span></dt>
	<dd>An authenticated token string, that is most commonly obtained from the <code>token</code> property of a <a href="/realtime/types#token-details"><code>TokenDetails</code></a> component of a token response. Use this option if you wish to use Token authentication. Read more about <a href="/realtime/authentication">Token authentication</a><br><i>Type: String</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>tls</code></span><span lang="ruby"><code>:tls</code></span></dt>
	<dd><em>true</em> A boolean value, indicating whether or not a TLS (&#8220;SSL&#8221;) secure connection should be used. An insecure connection cannot be used with Basic authentication ensuring private keys are compromised in transit.<br><i>Type: Boolean</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>clientId</code></span><span lang="ruby"><code>:client_id</code></span></dt>
	<dd>A client ID, used for identifying this client for presence purposes. The <span lang="default"><code>clientId</code></span><span lang="ruby"><code>client_id</code></span> can be any string. This option is primarily intended to be used in situations where the library is instanced with a key; note that a <span lang="default"><code>clientId</code></span><span lang="ruby"><code>client_id</code></span> may also be implicit in a token used to instance the library; an error will be raised if a <span lang="default"><code>clientId</code></span><span lang="ruby"><code>client_id</code></span> specified here conflicts with the <span lang="default"><code>clientId</code></span><span lang="ruby"><code>client_id</code></span> implicit in the token.<br><i>Type: String</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>useTokenAuth</code></span><span lang="ruby"><code>:use_token_auth</code></span></dt>
	<dd>When true, forces Token auth to be used.<br><i>Type: Boolean</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>authCallback</code></span><span lang="ruby"><code>:auth_callback</code></span></dt>
	<dd>A <span lang="default">function</span><span lang="java"><code>TokenCallback</code> instance</span><span lang="ruby">proc / lambda</span> to call when a new token is required. The role of the callback is to either generate a signed <a href="/realtime/types#token-request"><code>TokenRequest</code></a> which may then be submitted by the library to the <a href="/rest-api#requesttoken"><code>requestToken</code> REST API</a>; or to provide a valid token in as a <a href="/realtime/types#token-details"><code>TokenDetails</code></a> object. See <a href="/rest/authentication">authentication</a> for details of the token request format and associated API calls.<br><i>Type: <span lang="default">Function</span><span lang="java"><code>TokenCallback</code></span><span lang="ruby">Proc / Lamda</span></i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>authUrl</code></span><span lang="ruby"><code>:auth_url</code></span></dt>
	<dd>A URL that the library may use to obtain a token string (in plain text format), or a signed <a href="/realtime/types#token-request"><code>TokenRequest</code></a> or <a href="/realtime/types#token-details"><code>TokenDetails</code></a> (in JSON format). For example, this can be used by a client to obtain signed token requests from an application server.<br><i>Type: String</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>authMethod</code></span><span lang="ruby"><code>:auth_method</code></span></dt>
	<dd><em><span lang="default"><code>GET</code></span><span lang="ruby"><code>:get</code></span></em> The HTTP verb to use for the request, either <span lang="default"><code>GET</code></span><span lang="ruby"><code>:get</code></span> or <span lang="default"><code>POST</code></span><span lang="ruby"><code>:post</code></span><br><i>Type: <span lang="default">String</span><span lang="default">Symbol</span></i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>authHeaders</code></span><span lang="ruby"><code>:auth_headers</code></span></dt>
	<dd>A set of headers to be added to any request made to the <code>authUrl</code>. Useful when an application requires these to be added to validate the request or implement the response.<br><i>Type: <span lang="default">Object</span><span lang="ruby">Hash</span><span lang="java">Param[]</span></i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>authParams</code></span><span lang="ruby"><code>:auth_params</code></span></dt>
	<dd>A set of params to be added to any request made to the <code>authUrl</code>. When the <code>authMethod</code> is <code>GET</code>, query params are added to the URL, whereas when <code>authMethod</code> is <code>POST</code>, the params are sent as URL encoded form data. Useful when an application require these to be added to validate the request or implement the response.<br><i>Type: <span lang="default">Object</span><span lang="ruby">Hash</span><span lang="java">Param[]</span></i></dd>
</dl>


<div lang="javascript,nodejs"> <!-- start javascript,nodejs language block -->
<dl>
	<dt><code>log</code></dt>
	<dd>Parameters to control the log output of the library. The supplied value must be an object that may contain one or both of the following entries:<br />
<ul><br />
  <li><code>level</code>: a number controlling the verbosity of the output from 1 (minimum, errors only) to 4 (most verbose);</li><br />
  <li><code>handler</code>: a function to handle each line of log output. If <code>handler</code> is not specified, <code>console.log</code> is used.</li><br />
</ul><br />
Note that the log level and log handler have global scope in the library and will thus not act independently between library instances when multiple library instances exist concurrently.<br><i>Type: Object</i></dd>
</dl>
<dl>
	<dt><code>transports</code></dt>
	<dd>An optional array of transports to use, in descending order of preference. <span lang="javascript">In the browser environment the available transports are: <code>web_socket</code>, <code>xhr</code>, <code>comet</code>, <code>jsonp</code>, <code>iframe</code>.</span><span lang="nodejs">The transports available in the Node.js client library are: <code>web_socket</code>, <code>xhr</code>, <code>comet</code>, <code>jsonp</code>, <code>iframe</code>.</span></dd>
</dl>

</div> <!-- /end javascript,nodejs language block -->



<div lang="java"> <!-- start java language block -->
<dl>
	<dt><code>logLevel</code></dt>
	<dd><em>99</em> A number controlling the verbosity of the output from 2 (maximum, verbose) to 6 (errors only). A special value of 99 will silence all logging. Note that the <code>logLevel</code> is a static variable in the library and will thus not act independently between library instances when multiple library instances exist concurrently.<br><i>Type: Object</i></dd>
</dl>
<dl>
	<dt><code>logHandler</code></dt>
	<dd><em><code>System.out PrintStream</code></em> A <code>PrintStream</code> to handle each line of log output. If <code>logHandler</code> is not specified, <code>System.out</code> is used. Note that the <code>logHandler</code> is a static variable in the library and will thus not act independently between library instances when multiple library instances exist concurrently.<br><i>Type: PrintStream</i></dd>
</dl>

</div> <!-- /end java language block -->



<div lang="ruby"> <!-- start ruby language block -->
<dl>
	<dt><code>:log_level</code></dt>
	<dd><em><code>:error</code></em> Log level for the standard Logger that outputs to <code>STDOUT</code>. Can be set to <code>:fatal</code>, <code>:error</code>, <code>:warn</code>, <code>:info</code>, <code>:debug</code> or <code>:none</code> or any <a href="http://ruby-doc.org/stdlib-2.2.0/libdoc/logger/rdoc/Logger.html#class-Logger-label-Description"><code>Logger</code> severity constant</a><br><i>Type: Symbol, <a href="http://ruby-doc.org/stdlib-2.2.0/libdoc/logger/rdoc/Logger.html#class-Logger-label-Description">Logger::SEVERITY</a></i></dd>
</dl>
<dl>
	<dt><code>:logger</code></dt>
	<dd><em><code>STDOUT Logger</code></em> A <a href="http://ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html">Ruby <code>Logger</code></a> compatible object to handle each line of log output. If <code>loggger</code> is not specified, <code>STDOUT</code> is used.<br><i>Type: Ruby Logger</i></dd>
</dl>

</div> <!-- /end ruby language block -->

<dl>
	<dt><span lang="default"><code>useBinaryProtocol</code></span><span lang="ruby"><code>:use_binary_protocol</code></span></dt>
	<dd><em>true</em> If set to false, will forcibly disable the binary protocol. The binary protocol is used by default unless it is not supported.<br><i>Type: Boolean</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>queueMessages</code></span><span lang="ruby"><code>:queue_messages</code></span></dt>
	<dd><em>true</em> If false, this disables the default behaviour whereby the library queues messages on a connection in the disconnected or connecting states. The default behaviour allows applications to submit messages immediately upon instancing the library, without having to wait for the connection to be established. Applications may use this option to disable that behaviour if they wish to have application-level control over the queueing under those conditions.<br><i>Type: Boolean</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>echoMessages</code></span><span lang="ruby"><code>:echo_messages</code></span></dt>
	<dd><em>true</em> If false, prevents messages originating from this connection being echoed back on the same connection.</dd>
</dl>
<dl>
	<dt><span lang="default"><code>autoConnect</code></span><span lang="ruby"><code>:auto_connect</code></span></dt>
	<dd><em>true</em> By default as soon as the client library is instanced it will connect to Ably. You can optionally set this to false and explicitly connect to Ably when required.<br><i>Type: Boolean</i></dd>
</dl>
<dl>
	<dt><span lang="default"><code>recover</code></span><span lang="ruby"><code>:recover</code></span></dt>
	<dd>This option allows a connection to inherit the state of a previous connection that may have existed under a different instance of the Realtime library. This might typically be used by clients of the browser library to ensure connection state can be preserved when the user refreshes the page. See <a href="/realtime/connection/#connection-state-recovery">connection state recovery</a> for further information on this option.<br><i>Type: String</i></dd>
</dl>
    </article>
    <hr class="back">
    <a href="#documentation">Back to top</a>
  </div>
  <div id="sidebar">
  <a href="/" title="API Documentation Home"><img src="/assets/ably-logo.png" class="ably-logo" title="API Documentation Home"></a>
  <ul>
<li class=''><a href='/root/quick-start-guide/'>Quickstart Guide</a></li>
<li class=''><a href='/root/how-ably-works/'>How Ably works</a></li>
<li class=''><a href='/root/usage-limits-billing/'>Usage Limits &amp; Billing</a></li>
</ul>
  <h2><a href="/realtime/">Realtime client lib</a></h2>
<ul>
<li class='selected'><a href='/realtime/usage/'>Using the Realtime library</a></li>
<li class=''><a href='/realtime/connection/'>Connection</a></li>
<li class=''><a href='/realtime/channels-messages/'>Channels and Messages</a></li>
<li class=''><a href='/realtime/presence/'>Presence</a></li>
<li class=''><a href='/realtime/authentication/'>Authentication</a></li>
<li class=''><a href='/realtime/history/'>History</a></li>
<li class=''><a href='/realtime/statistics/'>Statistics</a></li>
<li class=''><a href='/realtime/types/'>Types</a></li>
</ul>
  <h2><a href="/rest/">REST client lib</a></h2>
<ul>
<li class=''><a href='/rest/usage/'>Using the REST library</a></li>
<li class=''><a href='/rest/channels-messages/'>Channels and Messages</a></li>
<li class=''><a href='/rest/presence/'>Presence</a></li>
<li class=''><a href='/rest/authentication/'>Authentication</a></li>
<li class=''><a href='/rest/history/'>History</a></li>
<li class=''><a href='/rest/statistics/'>Statistics</a></li>
<li class=''><a href='/rest/encryption/'>Encryption</a></li>
</ul>
  <h2><a href="/rest-api/">REST API</a></h2>
<ul>
</ul>
  <h2>General</h2>
<ul>
<li class=''><a href='/general/authentication/'>Authentication</a></li>
<li class=''><a href='/general/channel-rules-namespaces/'>Channel Rules and Namespaces</a></li>
<li class=''><a href='/general/webhooks/'>Receiving Webhooks</a></li>
<li class=''><a href='/general/statistics/'>Application Statistics</a></li>
<li class=''><a href='/general/migrating/'>Migrating to Ably</a></li>
</ul>
  <h2><a href="/client-lib-development-guide/">Library Development</a></h2>
<ul>
<li class=''><a href='/client-lib-development-guide/features/'>Features spec v0.8</a></li>
<li class=''><a href='/client-lib-development-guide/feature-prioritisation/'>Feature prioritisation</a></li>
<li class=''><a href='/client-lib-development-guide/protocol/'>Realtime Protocol Definition</a></li>
<li class=''><a href='/client-lib-development-guide/rest-api/'>REST API Definition</a></li>
<li class=''><a href='/client-lib-development-guide/test-api/'>Sandbox Test API</a></li>
<li class=''><a href='/client-lib-development-guide/encryption/'>Encryption</a></li>
<li class=''><a href='/client-lib-development-guide/websocket/'>WebSocket Transport</a></li>
<li class=''><a href='/client-lib-development-guide/comet/'>Comet Transport</a></li>
<li class=''><a href='/client-lib-development-guide/connection-recovery/'>Connection Recovery</a></li>
<li class=''><a href='/client-lib-development-guide/connection-manager/'>Connection Manager</a></li>
<li class=''><a href='/client-lib-development-guide/connection-fallback/'>Connection host fallback</a></li>
<li class=''><a href='/client-lib-development-guide/documentation-formatting-guide/'>Documentation Formatting Guide</a></li>
</ul>
  <ul>
<li><a href="https://www.ably.io">Visit Ably.io</a></li>
</ul>
</div>

</body>
</html>
